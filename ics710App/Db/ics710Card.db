## functionality: card setup: run/stop, gain, filter, samples/ch, sampling rate, etc.
## Yong Hu: ext.3961
## PREFIX	- follows NSLS2 naming: [PSy[:PI]][-SSy[:SI]][-TSy[:TI]]{Dev[:DI]}[SgN[:SgI][-SgD]]
#### Psy	-	Primary system
#### Ssy	-	Secondary system
#### Dev	-	Device name
## CARD     -	#board / digitizer; "0" refers to the first digitizer found during initialization. \\
##              For Acqiris crate and Concurrent CPU, it's the top slot(#5) if there's one digitizer in slot 5 
## NELM     -	max. number of samples 
## note: initialize records RVAL/VAL in ics710Drv*.cpp instead of using PINI

record(mbbo,"${PREFIX}Run-SP")
{   
   field(DESC,"setRunning")
   field(DTYP,"ics710")
   field(OUT,"@C${CARD} MRUN")
   field(PINI,"YES")
   field(RVAL, "1")
   field(SCAN,"Passive")
   field(ZRVL,"0")
   field(ZRST,"Stopped")
   field(ONVL,"1")
   field(ONST,"Running")
   info(autosaveFields_pass0, "RVAL")   
}

## initialize records RVAL/VAL in ics710Drv*.cpp instead of using PINI
record(mbbo,"${PREFIX}Gain-SP")
{   
   field(DESC,"setGain")
   field(DTYP,"ics710")
   field(OUT,"@C${CARD} MGAI")
   #initialize the RVAL in ics710DrvMbbo.cpp
   #field(PINI,"YES")
   #field(RVAL, "0")
   field(SCAN,"Passive")
   field(ZRVL,"0")
   field(ZRST,"10V")
   field(ONVL,"1")
   field(ONST,"5V")
   field(TWVL,"2")
   field(TWST,"3.333V")
   field(THVL,"3")
   field(THST,"2.5V")
   field(FRVL,"4")
   field(FRST,"2V")
   field(FVVL,"5")
   field(FVST,"1.667V")
   field(SXVL,"6")
   field(SXST,"1.429V")
   field(SVVL,"7")
   field(SVST,"1.25V")
   field(EIVL,"8")
   field(EIST,"1.111V")
   field(NIVL,"9")
   field(NIST,"1V")
   field(TEVL,"10")
   field(TEST,"0.909V")
   field(ELVL,"11")
   field(ELST,"0.833V")
   field(TVVL,"12")
   field(TVST,"0.769V")
   field(TTVL,"13")
   field(TTST,"0.714V")
   field(FTVL,"14")
   field(FTST,"0.667V")
   field(FFVL,"15")
   field(FFST,"0.625V")
   info(autosaveFields_pass0, "RVAL")    
}

record(mbbo,"${PREFIX}Filter-SP")
{   
   field(DESC,"setFilter")
   field(DTYP,"ics710")
   field(OUT,"@C${CARD} MFIL")
   #field(PINI,"YES")
   #field(RVAL, "10")
   field(SCAN,"Passive")
   field(ZRVL,"0")
   field(ZRST,"0Hz")
   field(ONVL,"1")
   field(ONST,"10KHz")
   field(TWVL,"2")
   field(TWST,"20KHz")
   field(THVL,"3")
   field(THST,"30KHz")
   field(FRVL,"4")
   field(FRST,"40KHz")
   field(FVVL,"5")
   field(FVST,"50KHz")
   field(SXVL,"6")
   field(SXST,"60KHz")
   field(SVVL,"7")
   field(SVST,"70KHz")
   field(EIVL,"8")
   field(EIST,"80KHz")
   field(NIVL,"9")
   field(NIST,"90KHz")
   field(TEVL,"10")
   field(TEST,"100KHz")
   field(ELVL,"11")
   field(ELST,"110KHz")
   field(TVVL,"12")
   field(TVST,"120KHz")
   field(TTVL,"13")
   field(TTST,"130KHz")
   field(FTVL,"14")
   field(FTST,"140KHz")
   field(FFVL,"15")
   field(FFST,"150KHz")
   info(autosaveFields_pass0, "RVAL") 
}

record(mbbo,"${PREFIX}Osr-SP")
{   
   field(DESC,"setOverSamplingRatio")
   field(DTYP,"ics710")
   field(OUT,"@C${CARD} MOSR")
   #field(PINI,"YES")
   #field(RVAL, "2")
   field(SCAN,"Passive")
   field(ZRVL,"0")
   field(ZRST,"Normal")
   field(ONVL,"1")
   field(ONST,"Double")
   field(TWVL,"2")
   field(TWST,"Quad")
   #reconfigure the samplingRate: trigger the record to be processed
   field(FLNK, "${PREFIX}SampleRate-SP")
   info(autosaveFields_pass0, "RVAL")
}

record(mbbo,"${PREFIX}TrigMode-SP")
{   
   field(DESC,"setTrigger")
   field(DTYP,"ics710")
   field(OUT,"@C${CARD} MTRI")
   #field(PINI,"YES")
   #field(RVAL, "1")
   field(SCAN,"Passive")
   field(ZRVL,"0")
   field(ZRST,"Internal")
   field(ONVL,"1")
   field(ONST,"External")
   info(autosaveFields_pass0, "RVAL")
}

record(mbbo,"${PREFIX}AcqMode-SP")
{   
   field(DESC,"setAcquisitionMode")
   field(DTYP,"ics710")
   field(OUT,"@C${CARD} MACQ")
   #field(PINI,"YES")
   #field(RVAL, "1")
   field(SCAN,"Passive")
   field(ZRVL,"0")
   field(ZRST,"Continuous")
   field(ONVL,"1")
   field(ONST,"CaptureNoPreTrig")
   field(TWVL,"2")
   field(TWST,"CaptureWithPreTrig")
   info(autosaveFields_pass0, "RVAL")
}

record(longout,"${PREFIX}TotalCh-SP")
{
   field(DESC,"setTotalChannel")
   field(DTYP,"ics710")
   field(OUT,"@C${CARD} LCHA")
   #initialize the VAL(not DOL) in ics710DrvLongout.cpp
   #field(PINI,"YES")
   #field(DOL, "4")
   field(HOPR, "8")
   field(LOPR, "2")
   field(DRVH, "8")
   field(DRVL, "2")
   field(EGU, "channel")
   info(autosaveFields_pass0, "VAL")
}

record(longout,"${PREFIX}Samples-SP")
{
   field(DESC,"setSamples")
   field(DTYP,"ics710")
   field(OUT,"@C${CARD} LSAM")
#   field(PINI,"YES")
#   field(DOL, "10000")
   field(DRVH, "${NELM}")
   field(DRVL, "1")
   field(EGU, "sample")
   #neither RVAL nor VAL works with autosave 
   info(autosaveFields_pass0, "VAL")
}

record(longout,"${PREFIX}SampleRate-SP")
{
   field(DESC,"setSamplingRate")
   field(DTYP,"ics710")
   field(OUT,"@C${CARD} LRAT")
   #field(PINI,"YES")
   #field(DOL, "200")
   field(HOPR, "216")
   field(LOPR, "1")
   field(DRVH, "216")
   field(DRVL, "1")
   field(EGU, "KHz") 
   #neither RVAL nor VAL works with autosave 
   info(autosaveFields_pass0, "VAL")  
}