#Beam dosage (mAh) related to vacumm system
record(compress,"SR:C03-BI{DCCT:1}Dosage:1min-Com_")
{
        field(DESC, "average I over 1-min")
        #INP is scalar
        field(INP,"SR:C03-BI{DCCT:1}I:Total-I CP")
        field(ALG,"N to 1 Average")
        field(NSAM,"1")
        field(N,"60")
        field(PREC,"3")
        field(EGU,"mA")
        field(FLNK,"SR:C03-BI{DCCT:1}Dosage:1min-I")
}

record(ai, "SR:C03-BI{DCCT:1}Dosage:1min-I")
{
        field(DESC, "average I over 1-min")
	field(INP,  "SR:C03-BI{DCCT:1}Dosage:1min-Com_")
        field(PREC, "3")
        field(EGU,  "mAh")
        field(MDEL, "-1")
	field(ADEL, "-1")
	field(FLNK, "SR:C03-BI{DCCT:1}Dosage:1h-Com_")
}

record(compress,"SR:C03-BI{DCCT:1}Dosage:1h-Com_")
{
        field(DESC, "average I over 1-hour")
        #INP is scalar
        field(INP,"SR:C03-BI{DCCT:1}Dosage:1min-I")
        field(ALG,"N to 1 Average")
        field(NSAM,"1")
        field(N,"60")
        field(PREC,"3")
        field(EGU,"mA")
        field(FLNK,"SR:C03-BI{DCCT:1}Dosage:1h-I")
}

record(ai, "SR:C03-BI{DCCT:1}Dosage:1h-I")
{
	field(INP,  "SR:C03-BI{DCCT:1}Dosage:1h-Com_")  
        field(MDEL, "-1")
        field(ADEL, "-1")
        field(DESC, "average I over 1-hour")
        field(PREC, "3")
        field(EGU,  "mAh")
	field(FLNK, "SR:C03-BI{DCCT:1}Dosage:1d-Com_")
}

record(compress,"SR:C03-BI{DCCT:1}Dosage:1d-Com_")
{
        field(DESC, "average I over 1-day")
        #INP is scalar
        field(INP,"SR:C03-BI{DCCT:1}Dosage:1h-I")
        field(ALG,"N to 1 Average")
        field(NSAM,"1")
        field(N,"24")
        field(PREC,"3")
        field(EGU,"mA")
        field(FLNK,"SR:C03-BI{DCCT:1}Dosage:1d-I")
}

record(ai, "SR:C03-BI{DCCT:1}Dosage:1d-I")
{
        field(INP,  "SR:C03-BI{DCCT:1}Dosage:1d-Com_")
        field(MDEL, "-1")
        field(ADEL, "-1")
        field(DESC, "average I over 1-day")
        field(PREC, "3")
        field(EGU,  "mAh")
}

record(compress,"SR:C03-BI{DCCT:1}Dosage:1w-Com")
{
        field(DESC, "1-week dosage")
        #INP is scalar
        field(INP,"SR:C03-BI{DCCT:1}Dosage:1h-I CP")
        field(ALG,"Circular Buffer")
        field(NSAM,"168")
        field(PREC,"3")
        field(EGU,"mAh")
}

record(stringin, "SR:C03-BI{DCCT:1}Dosage:ST-Str")
{
        field(DESC, "Start time")
        field(PINI, "1")
        field(VAL,  "2014-03-10 00:00")
        info(autosaveFields_pass0, "VAL")
}

record(stringin, "SR:C03-BI{DCCT:1}Dosage:ET-Str")
{
        field(DESC, "End Time")
        field(PINI, "1")
        field(VAL,  "2014-03-12 00:00")
        info(autosaveFields_pass0, "VAL")
}

#caput SR:C03-BI{DCCT:1}Dosage-Cmd.PROC 1
record(calc, "SR:C03-BI{DCCT:1}Dosage-Cmd")
{
        field(INPA, "SR:C03-BI{DCCT:1}Dosage-Cmd")
        field(CALC, "A+1")
}

record(bo, "SR:C03-BI{DCCT:1}DataInterval-Cmd")
{
	field(DESC, "1-minute or 1-hour?")
        field(ZNAM, "Use hour-dosage")
        field(ONAM, "Use minute-dosage")
	field(HIGH, "900")
}

record(mbbi, "SR:C03-BI{DCCT:1}Dosage-Sts")
{
        field(ZRST, "Done")
        field(ONST, "time input error")
        field(TWST, "Retrieving data, wait...")
        field(THST, "Failed to retrieve data")
}

record(ai, "SR:C03-BI{DCCT:1}Dosage:Total-I")
{
        field(DESC, "Total beam dosage")
        field(EGU,  "mAh")
        field(PREC, "3")
        field(MDEL, "-1")
	field(ADEL, "-1")
}

